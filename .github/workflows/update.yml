name: Keep Repo Active

on:
  workflow_dispatch:
  schedule:
    # 매일 자정에 실행 (한국 시간 기준)
    - cron: '15 15 * * *'

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Update README
        run: |
          # 새로운 업데이트 라인을 임시 파일에 먼저 작성
          echo "Last updated on $(TZ='Asia/Seoul' date '+%Y-%m-%d %H:%M:%S %Z')" > temp_readme.md
          # 기존 README.md 내용을 임시 파일 아래에 추가
          cat README.md >> temp_readme.md
          # 임시 파일을 원래 README.md 파일로 덮어쓰기
          mv temp_readme.md README.md
          
          git config --global user.name 'github-actions'
          git config --global user.email 'github-actions@github.com'
          git add README.md
          # 변경 사항이 있을 때만 커밋
          git diff --quiet && git diff --staged --quiet || git commit -m "Update README to keep repo active"
          git push
